"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2748],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>g});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(a),m=r,g=d["".concat(p,".").concat(m)]||d[m]||c[m]||o;return a?n.createElement(g,i(i({ref:t},u),{},{components:a})):n.createElement(g,i({ref:t},u))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[d]="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},7044:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var n=a(7462),r=(a(7294),a(3905));const o={},i="Generate Code and Data",l={unversionedId:"beginner/generatecodeanddata",id:"beginner/generatecodeanddata",title:"Generate Code and Data",description:"Luban not only supports exporting configuration data, but also has built-in support for generating code in multiple languages \u200b\u200bfor runtime configuration loading. At the same time, Luban also supports popular message frameworks such as protobuf, flatbuffers, and msgpack.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/beginner/generatecodeanddata.md",sourceDirName:"beginner",slug:"/beginner/generatecodeanddata",permalink:"/en/docs/beginner/generatecodeanddata",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Quick Start",permalink:"/en/docs/beginner/quickstart"},next:{title:"Add Luban To Your Project",permalink:"/en/docs/beginner/addtoproject"}},p={},s=[{value:"Supported languages",id:"supported-languages",level:2},{value:"Supported data formats",id:"supported-data-formats",level:2},{value:"Generate data",id:"generate-data",level:2},{value:"Generate code",id:"generate-code",level:2},{value:"Generate code and data at the same time",id:"generate-code-and-data-at-the-same-time",level:2}],u={toc:s},d="wrapper";function c(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"generate-code-and-data"},"Generate Code and Data"),(0,r.kt)("p",null,"Luban not only supports exporting configuration data, but also has built-in support for generating code in multiple languages \u200b\u200bfor runtime configuration loading. At the same time, Luban also supports popular message frameworks such as protobuf, flatbuffers, and msgpack."),(0,r.kt)("p",null,"Even if the language you use is not in the default supported language list, it can also be supported by these message frameworks."),(0,r.kt)("h2",{id:"supported-languages"},"Supported languages"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"c++ (11+)"),(0,r.kt)("li",{parentName:"ul"},"c# (.net framework 2+. dotnet core 2+)"),(0,r.kt)("li",{parentName:"ul"},"java (1.6+)"),(0,r.kt)("li",{parentName:"ul"},"go (1.10+)"),(0,r.kt)("li",{parentName:"ul"},"lua (5.1+)"),(0,r.kt)("li",{parentName:"ul"},"typescript (3.0+)"),(0,r.kt)("li",{parentName:"ul"},"python (2.7+ and 3.0+)"),(0,r.kt)("li",{parentName:"ul"},"gdscript (4.0+)"),(0,r.kt)("li",{parentName:"ul"},"php"),(0,r.kt)("li",{parentName:"ul"},"rust")),(0,r.kt)("h2",{id:"supported-data-formats"},"Supported data formats"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"bin (",(0,r.kt)("strong",{parentName:"p"},"recommended for officially released projects"),")")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"json")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"lua")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"xml")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"yaml"))),(0,r.kt)("h2",{id:"generate-data"},"Generate data"),(0,r.kt)("p",null,"The command line parameter ",(0,r.kt)("inlineCode",{parentName:"p"},"-d {dataTarget}")," is used to specify the generated data type, and the parameter ",(0,r.kt)("inlineCode",{parentName:"p"},"-x outputDataDir={dataOutputDir}")," is used to specify the code output directory. Suppose we want to generate json data, the example is as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bat"},"set GEN_CLIENT={path to Luban.dll}\nset CONF_ROOT={path to DataTables directory}\n\ndotnet %GEN_CLIENT% ^\n-t client ^\n-d json ^\n--conf %CONF_ROOT%\\luban.conf ^\n-x outputDataDir=..\\GenerateDatas\\json\n\npause\n")),(0,r.kt)("p",null,"For more dataTarget, see ",(0,r.kt)("a",{parentName:"p",href:"/en/docs/manual/commandtools#data-target"},"DataTarget List"),"."),(0,r.kt)("h2",{id:"generate-code"},"Generate code"),(0,r.kt)("p",null,"The command line parameter ",(0,r.kt)("inlineCode",{parentName:"p"},"-c {codeTarget}")," is used to specify the type of code to be generated, and the parameter ",(0,r.kt)("inlineCode",{parentName:"p"},"-x outputCodeDir={codeOutputDir}")," is used to specify the code output directory. Suppose we want to generate C# code to load JSON data, the example is as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bat"},"\nset GEN_CLIENT={path to Luban.dll}\nset CONF_ROOT={path to DataTables directory}\n\ndotnet %GEN_CLIENT% ^\n-t client ^\n-c cs-simple-json ^\n--conf %CONF_ROOT%\\luban.conf ^\n-x outputCodeDir=Assets/Gen\n\npause\n")),(0,r.kt)("p",null,"In codeTarget ",(0,r.kt)("inlineCode",{parentName:"p"},"cs-simple-json"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"cs")," means generating C# language code, ",(0,r.kt)("inlineCode",{parentName:"p"},"simple")," means using SimpleJson to load JSON files, and ",(0,r.kt)("inlineCode",{parentName:"p"},"json")," means loading JSON data. All codeTargets follow this naming rule."),(0,r.kt)("p",null,"For the same data format (such as JSON), the data files generated for all languages \u200b\u200bare the same. That is, the exported data is not affected by the ",(0,r.kt)("inlineCode",{parentName:"p"},"-c")," parameter."),(0,r.kt)("p",null,"For more codeTargets, see ",(0,r.kt)("a",{parentName:"p",href:"/en/docs/manual/commandtools#code-target"},"CodeTarget List"),"."),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Please do not point ",(0,r.kt)("inlineCode",{parentName:"p"},"outputCodeDir")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"outputDataDir")," to the same directory, they will overwrite each other!")),(0,r.kt)("h2",{id:"generate-code-and-data-at-the-same-time"},"Generate code and data at the same time"),(0,r.kt)("p",null,"Running two commands to generate code and data separately is not only troublesome, but also increases the generation time. Luban supports generating code and data at once, as shown below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bat"},"\nset GEN_CLIENT={path to Luban.dll}\nset CONF_ROOT={path to DataTables directory}\n\ndotnet %GEN_CLIENT% ^\n-t client ^\n-c cs-simple-json ^\n-d json ^\n--conf %CONF_ROOT%\\luban.conf ^\n-x outputCodeDir=Assets/Gen ^\n-x outputDataDir=..\\GenerateDatas\\json\n")),(0,r.kt)("p",null,"It is also possible to generate multiple languages \u200b\u200band data formats at once, as long as you specify multiple ",(0,r.kt)("inlineCode",{parentName:"p"},"-c")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"-d")," parameters, but they must be in the same group (that is, the -t parameter is the same). Obviously, they should not be output to the same directory. Luban supports ",(0,r.kt)("a",{parentName:"p",href:"../manual/cascadingoption"},"hierarchical parameter mechanism"),". When there are multiple codeTargets or dataTargets\n, their output directories can be specified separately through ",(0,r.kt)("inlineCode",{parentName:"p"},"{codeTarget}.outputCodeDir=xxx")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"{dataTarget}.outputDataDir=xxx"),". The example is as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bat"},"set GEN_CLIENT={path to Luban.dll}\nset CONF_ROOT={path to DataTables directory}\n\ndotnet %GEN_CLIENT% ^\n-t client ^\n-c cs-simple-json ^\n-c cs-bin ^\n-d json ^\n-d bin ^\n--conf %CONF_ROOT%\\luban.conf ^\n-x cs-simple-json.outputCodeDir=Assets/Gen/Json ^\n-x cs-bin.outputCodeDir=Assets/Gen/Bin ^\n-x json.outputDataDir=..\\GenerateDatas\\json ^\n-x bin.outputDataDir=..\\GenerateDatas\\bin\n\n")),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Please do not point multiple ",(0,r.kt)("inlineCode",{parentName:"p"},"outputCodeDir")," to the same directory, and do not point multiple ",(0,r.kt)("inlineCode",{parentName:"p"},"outputDataDir")," to the same directory, they will overwrite each other!")))}c.isMDXComponent=!0}}]);